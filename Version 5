#include <iostream>
#include <ctime>
#include <cstdlib>
using namespace std;


//Base Class For Stats
class Stats
{
  public:
    string PlayerName;
    int PlayerHealthStat;
    int PlayerAttackStat;
    int EnemyHealthStat;
    int EnemyAttackStat;
    
    //Enemy Attack Function
    void EnemyAttack ()
    {
      int x = PlayerHealthStat;
      int y = EnemyAttackStat;
      x = x - y;
      cout << "You take " << PlayerHealthStat << " damage!";
      PlayerHealthStat = x;

    }

    //Player Attack Function
    void PlayerAttack ()
    {
      int y = PlayerAttackStat;
      int x = EnemyHealthStat;
      x = x - y;
      cout << "The enemy takes " << EnemyHealthStat << " damage!" << endl;
      EnemyHealthStat = x;
    }

    //Player Heal Function
    void PlayerHeal ()
    {
      PlayerHealthStat = PlayerHealthStat + rand()%10+1;
      cout << "You heal yourself to " << PlayerHealthStat << " points!" << endl;
    }
};

Stats Enemy;

//Enemy Generator Function
void SpawnEnemy ()
{
  //Randomizes Enemy Type
  int EnemyType;
  EnemyType = rand()%3+1;

  //Enemy Classes
  switch (EnemyType)
  {
    case 1:
    {
      Stats Goblin;
      Goblin.EnemyHealthStat = 15;
      Goblin.EnemyAttackStat = 5;
      cout << "A goblin appears!" << endl;
      Stats Enemy = Goblin;
    }
    break;
    case 2:
    {
      Stats Orc;
      Orc.EnemyHealthStat = 70;
      Orc.EnemyAttackStat = 10;
      cout << "An orc appears!" << endl;
      Stats Enemy = Orc;
    }
    break;
    case 3:
    {
      Stats Dragon;
      Dragon.EnemyHealthStat = 100;
      Dragon.EnemyAttackStat = 15;
      cout << "A dragon appears!" << endl;
      Stats Enemy = Dragon;
    }
    break;
  }
}

//Turn Indicator Variable
int Turn = 0;

//Menu Selection Variable
int PlayerSelection;

int main() 
{
  srand(time(0));
  
  //Creates Player Object
  Stats Player;
  Player.PlayerAttackStat = 10;
  Player.PlayerHealthStat = 50;
  
  cout << "Welcome to CombatPlusPlus! Please enter your name." << endl;
  cin >> Player.PlayerName;
  cout << "Welcome Sir " << Player.PlayerName << "! Prepare for combat!" << endl;
  SpawnEnemy();
  Stats Enemy;
  
    //Player's Turn
    while (Turn == 0)
    {
    {
      cout << "It's your turn! What will you do?" << endl;
      cout << "1. Attack" << endl;
      cout << "2. Heal" << endl;
      cin >> PlayerSelection;
      cout << Player.PlayerAttackStat << endl; 
      cout << Player.PlayerHealthStat << endl;
      cout << Enemy.EnemyHealthStat << endl;
      cout << Enemy.EnemyAttackStat << endl;
      switch (PlayerSelection)
      {
        case 1:
        {
          Player.PlayerAttack();
          //Win Condition
          if (Enemy.EnemyHealthStat <= 0)
            {
              cout << "You are victorious!" << endl;
              return 0;
            }
          Turn = 1;
          }
          break;
        case 2:
        {
          Player.PlayerHeal();
          Turn = 1;
        }
        break;
        default:
        {
          cout << "You skip your turn!" << endl;
          Turn = 1;
        }
      }
    }
    //Enemy's Turn
    if (Turn == 1)
    {
      cout << "The enemy attacks you!" << endl;
      Enemy.EnemyAttack();
   //Lose Condition
      if (Player.PlayerHealthStat <= 0)
      {
        cout << "You are dead!" << endl;
        return 0;
      }
      Turn = 0;
    }
    }
}
