#include <iostream>
#include <ctime>
#include <cstdlib>
using namespace std;


//Base Class For Stats
class Stats
{
  public:
    string PlayerName;
    int PlayerHealthStat;
    int PlayerAttackStat;
    int EnemyHealthStat;
    int EnemyAttackStat;
    
    //Enemy Attack Function
    void EnemyAttack ()
    {
      PlayerHealthStat = PlayerHealthStat - EnemyAttackStat;
      cout << "You take " << PlayerHealthStat << " damage!";
    }

    //Player Attack Function
    void PlayerAttack ()
    {
      EnemyHealthStat = EnemyHealthStat - PlayerAttackStat;
      cout << "The enemy takes " << EnemyHealthStat << " damage!" << endl;
    }

    //Player Heal Function
    void PlayerHeal ()
    {
      PlayerHealthStat = PlayerHealthStat + rand()%10+1;
      cout << "You heal yourself to " << PlayerHealthStat << " points!" << endl;
    }
};

//Enemy Generator Function
void SpawnEnemy ()
{
  //Randomizes Enemy Type
  int EnemyType;
  EnemyType = rand()%3+1;
  
  //Enemy Classes
  switch (EnemyType)
  {
    case 1:
    {
      Stats Goblin;
      Goblin.EnemyHealthStat = 10;
      Goblin.EnemyAttackStat = rand()%3+1;
      cout << "A goblin appears!" << endl;
    }
    break;
    case 2:
    {
      Stats Orc;
      Orc.EnemyHealthStat = 20;
      Orc.EnemyAttackStat = rand()%5+1;
      cout << "An orc appears!" << endl;
    }
    break;
    case 3:
    {
      Stats Dragon;
      Dragon.EnemyHealthStat = 30;
      Dragon.EnemyAttackStat = rand()%10+1;
      cout << "A dragon appears!" << endl;
    }
    break;
  }
}

//Turn Variable
int Turn = 0;

//Menu Selection Variable
int PlayerSelection;

int main() 
{
  srand(time(0));
  Stats Player;
  Player.PlayerAttackStat = rand()%10+1;
  Player.PlayerHealthStat = 20;
  cout << "Welcome to CombatPlusPlus! Please enter your name." << endl;
  cin >> Player.PlayerName;
  cout << "Welcome Sir " << Player.PlayerName << "! Prepare for combat!" << endl;
  SpawnEnemy();
  do
  {
    //Player's Turn
    if (Turn == 0)
    {
      cout << "It's your turn! What will you do?" << endl;
      cout << "1. Attack" << endl;
      cout << "2. Heal" << endl;
      cin >> PlayerSelection;
      switch (PlayerSelection)
      {
        case 1:
        {
          Player.PlayerAttack();
        }
        break;
        case 2:
        {
          Player.PlayerHeal();
        }
        break;
        default:
        {
          cout << "You skip your turn!" << endl;
          Turn = 1;
        }
      }
    }
    //Enemy's Turn
    if (Turn == 1)
    {
      cout << "The enemy attacks you!" << endl;
      //EnemyAttackFunction
    }
  } while (Player.PlayerHealthStat > 0);
  
  //Lose Condition
  if (Player.PlayerHealthStat == 0)
  {
    cout << "You are dead!" << endl;
    return 0;
  }

  //Win Condition
  if (/*EnemyHealthStat*/)
  {
    cout << "You are victorious!" << endl;
    return 0;
  }
}
